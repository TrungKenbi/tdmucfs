<div class="container">
    <div class="row">
        <div class="col">
            <div class="shadow-lg d-block shadow text-center" style="width: 100%;min-height: 630px;margin-top: 119px;background-color: rgba(255,255,255,0.79);">
                <h1>Danh Sách Bài Đã Đăng
                <a href="/post">
                    <button class="btn btn-info">Đăng Bài Mới</button>
                </a></h1>
                <br/>
                <table class="table">
                    <thead class="thead-light">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Nội dung</th>
                        <th scope="col">Hình ảnh</th>
                        <th scope="col">Trạng thái</th>
                        <th scope="col">Ghi chú</th>
                        <th scope="col">Thao tác</th>
                    </tr>
                    </thead>
                    <tbody>
                    <%
                        if (locals.posts) {
                            var i = (current == 1) ? 1 : (current - 1) * 10 + 1;
                            posts.forEach(post => {
                    %>
                        <tr>
                            <th scope="row"><%= i %></th>
                            <td><%= post.content.length > 30 ? post.content.substring(0, 30) + '...' : post.content %></td>
                            <td><%= post.image.length %></td>
                            <td><%- statusList[post.status] %></td>
                            <td><%= post.note %></td>
                            <td>
                                <button class="btn btn-warning"><i class="fa fa-pencil-square-o"></i></button>
                                <button class="btn btn-danger"><i class="fa fa-trash"></i></button>
                            </td>
                        </tr>
                    <%   i++;});
                        } %>
                    </tbody>
                </table>


                <% if (locals.pages && pages > 0) { %>
                    <ul class="pagination">
                        <% if (current == 1) { %>
                            <li class="page-item disabled"><a class="page-link">Trang Đầu</a></li>
                        <% } else { %>
                            <li class="page-item"><a class="page-link" href="/posts/1">Trang Đầu</a></li>
                        <% } %>
                        <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                        <% if (i !== 1) { %>
                            <li class="page-item disabled"><a class="page-link">...</a></li>
                        <% } %>
                        <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                            <% if (i == current) { %>
                                <li class="page-item active"><a class="page-link"><%= i %></a></li>
                            <% } else { %>
                                <li class="page-item "><a class="page-link"href="/posts/<%= i %>"><%= i %></a></li>
                            <% } %>
                            <% if (i == Number(current) + 4 && i < pages) { %>
                                <li class="page-item disabled"><a class="page-link">...</a></li>
                            <% } %>
                        <% } %>
                        <% if (current == pages) { %>
                            <li class="page-item disabled"><a class="page-link">Trang Cuối</a></li>
                        <% } else { %>
                            <li class="page-item"><a class="page-link" href="/posts/<%= pages %>">Trang Cuối</a></li>
                        <% } %>
                    </ul>
                <% } %>



            </div>
        </div>
    </div>
</div>